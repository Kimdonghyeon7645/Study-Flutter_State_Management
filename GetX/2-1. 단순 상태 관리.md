# 단순 상태 관리 (Simple state management)

## 1. 컨트롤러 영역

- getx 컨트롤러 = 상태를 저장하고 상태를 변경하는 메소드들을 가진 클래스
- 보통 `lib/controllers/XXX_controller.dart` 등의 경로로 선언

```dart
class CountController extends GetxController {
  int count = 0;

  void increment() {
    count++;
    update();
  }
}
```

## 2. 위젯 영역

- 컨트롤러를 사용하려면 우선 위젯에 등록해야 함

#### 0. 위젯에 컨트롤러 등록

```dart
class MyHomePage extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    final controller = Get.put(CountController());
    // Get.put 메소드로 위젯에 컨트롤러 등록 가능
    // 1. build 메소드 안에서 Get.put 사용 : 위젯 리빌드 될때마다 컨트롤러 새로 생성 + 위젯 안쓰이게되면 컨트롤러도 종료
    // 2. build 메소드 바깥에서 Get.put 사용 : 위젯 리빌드, 안쓰게 되도 컨트롤러는 계속 유지 (메모리 누수 조심)
  }
}
```

- 위젯에서는 컨트롤러를 통해 상태값을 읽고 쓰는 2가지 작업이 가능

#### 1. 컨트롤러의 메소드를 호출 (`Get.find<컨트롤러명>.메소드명()`)

```dart
/*
GetBuilder 를 사용하여 컨트롤러 상태값이 변경될때 마다(컨트롤러 내에서 update() 메소드가 호출될때 마다)
변경된 상태값으로 Builder 하위 위젯을 리빌드
*/
child: GetBuilder<CountController>(builder: (ctr) => Text('${ctr.count}')),
```

#### 2. 컨트롤러 상태값의 변경을 의존하는 위젯 선언 (`GetBuilder()`)
```dart
final controller = Get.put(CountController());
// ...
FloatingActionButton(
  child: const Icon(Icons.add),
  onPressed: controller.increment,
  // 또는 Get.find 메소드로 컨트롤러 참조 가능 : Get.find<CountController>.increment
  // 메소드 호출시 인자를 넘기는 것도 가능 : () => Get.find<CountController>.set(2)
),
```
